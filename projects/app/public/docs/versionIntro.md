### FastGPT V4.8.9

#### 新功能说明

1. **文件上传**

支持在简易模式和工作流中上传文档，目前版本，主要以上传文档总结为主，如果需要通过工作流编排实现类似于内容提取、文档对比之类的功能，需要配合代码运行去使用。

- 在系统配置中可以开启文件上传，对话框中即可上传文件。文件包括文档和图片；是否可上传图片，不再依赖视觉模型决定，而是通过系统配置决定。
- 简易模式下，会通过工具调用，由模型决定是否读取文档，所以尽可能选择支持工具调用的模型。
- 工作流模式下，可以通过文档解析节点，手动获取解析结果进行后续流程。

|                                                           |                                                           |
| --------------------------------------------------------- | --------------------------------------------------------- |
| ![](https://oss.laf.run/otnvvf-imgs/4.8.9/1280X1280.PNG)  | ![](https://oss.laf.run/otnvvf-imgs/4.8.9/1280X12802.PNG) |
| ![](https://oss.laf.run/otnvvf-imgs/4.8.9/1280X12806.PNG) | ![](https://oss.laf.run/otnvvf-imgs/4.8.9/1280X12801.PNG) |

2. **AI 对话模型，启用视觉模型**

之前有反馈，工作流中所有模型都会强制使用视觉模式，浪费了资源，目前可以手动关闭。开启后会自动获取对话框上传的图片和“用户问题”中的图片链接。

![](https://oss.laf.run/otnvvf-imgs/4.8.9/1280X12803.PNG)

3. **清空对话引导**

![](https://oss.laf.run/otnvvf-imgs/4.8.9/1280X12804.PNG)

#### 优化说明

1. 优化 - 对话框懒加载。
2. 优化 - i18n 翻译。
3. 优化 - 减少工具调用结果的存储，不再实际存储完整响应，避免超出存储限制。
4. 优化 - QA 拆分支持自定义 chunk 大小，并优化 gpt4o-mini 拆分时，chunk 太大导致生成内容很少的问题。

#### 问题修复

1. 修复 - 删除应用后回到聊天选择最后一次对话的应用为删除的应用时提示无该应用问题。
2. 修复 - 插件运行获取历史记录后无法更新到页面。
3. 修复 - 插件默认值无法正常显示。
4. 修复 - 工具调用温度和最大回复值未生效。
5. 修复 - 知识库文件上传进度更新可能异常。
6. 修复 - 知识库 rebuilding 时候，页面总是刷新到第一页。
7. 修复 - 函数调用模式，assistant role 中，GPT 模型必须传入 content 参数。（不影响大部分模型，目前基本都改用用 ToolChoice 模式，FC 模式已弃用）。
8. 修复 - docs: Repair and supplement document content xinference.md。
9. 修复 - 知识库列表右下角类型的名称上下居中。
10. 修复 - 知识库 list openapi 鉴权问题。
